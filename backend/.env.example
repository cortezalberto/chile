# =============================================================================
# Integrador Backend - Environment Variables Example
# =============================================================================
# Copy this file to .env and update with your values.
# NEVER commit .env to version control!
#
# Generate secure secrets with:
#   openssl rand -hex 32
#   python -c "import secrets; print(secrets.token_hex(32))"
# =============================================================================

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------
ENVIRONMENT=development
DEBUG=true

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql+psycopg://postgres:postgres@localhost:5432/menu_ops

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
# NOTE: Docker Compose exposes Redis on port 6380 (not the default 6379)
REDIS_URL=redis://localhost:6380

# -----------------------------------------------------------------------------
# JWT Configuration (CRITICAL - Change in production!)
# -----------------------------------------------------------------------------
# SECURITY: Use at least 32 random hex characters in production
# Generate with: openssl rand -hex 32
JWT_SECRET=dev-secret-change-me-in-production
JWT_ISSUER=menu-ops
JWT_AUDIENCE=menu-ops-users

# Table token for diner authentication (HMAC)
# SECURITY: Use at least 32 random hex characters in production
TABLE_TOKEN_SECRET=table-token-secret-change-me

# Token lifetimes (SEC-01: Short-lived access tokens reduce exposure window)
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Table token expiration (reduced from 8h for security)
JWT_TABLE_TOKEN_EXPIRE_HOURS=3

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
LOGIN_RATE_LIMIT=5
LOGIN_RATE_WINDOW=60

# -----------------------------------------------------------------------------
# WebSocket Configuration
# -----------------------------------------------------------------------------
WS_MAX_CONNECTIONS_PER_USER=5
WS_HEARTBEAT_TIMEOUT=60
WS_MAX_MESSAGE_SIZE=65536

# -----------------------------------------------------------------------------
# Server Ports
# -----------------------------------------------------------------------------
REST_API_PORT=8000
WS_GATEWAY_PORT=8001

# -----------------------------------------------------------------------------
# Ollama (RAG Chatbot)
# -----------------------------------------------------------------------------
OLLAMA_URL=http://localhost:11434
EMBED_MODEL=nomic-embed-text
CHAT_MODEL=qwen2.5:7b

# -----------------------------------------------------------------------------
# Mercado Pago (Payments) - Leave empty to disable
# -----------------------------------------------------------------------------
MERCADOPAGO_ACCESS_TOKEN=
MERCADOPAGO_WEBHOOK_SECRET=
MERCADOPAGO_NOTIFICATION_URL=

# -----------------------------------------------------------------------------
# Frontend URLs
# -----------------------------------------------------------------------------
BASE_URL=http://localhost:5176

# -----------------------------------------------------------------------------
# CORS (Production only - comma-separated list)
# -----------------------------------------------------------------------------
# ALLOWED_ORIGINS=https://app.example.com,https://admin.example.com
